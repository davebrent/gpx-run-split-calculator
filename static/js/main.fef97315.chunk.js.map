{"version":3,"sources":["gpx.js","calc.js","components/FileDropper.js","App.js","index.js"],"names":["gpxParser","this","xmlSource","metadata","waypoints","tracks","routes","prototype","parse","gpxstring","domParser","window","DOMParser","parseFromString","querySelector","name","getElementValue","desc","time","author","authorElem","email","emailElem","id","getAttribute","domain","link","linkElem","href","text","type","queryDirectSelector","wpts","slice","call","querySelectorAll","idx","wpt","pt","lat","parseFloat","lon","ele","cmt","push","rtes","rte","route","src","number","innerHTML","routepoints","rtepts","idxIn","rtept","distance","calculDistance","elevation","calcElevation","points","trks","trk","track","trackpoints","trkpts","trkpt","parent","needle","elem","undefined","childNodes","data","elements","finalElem","length","directChilds","tagName","totalDistance","cumulDistance","i","calcDistanceBetween","total","cumul","wpt1","wpt2","latlng1","latlng2","rad","Math","PI","lat1","lat2","sinDLat","sin","sinDLon","a","cos","atan2","sqrt","dp","dm","ret","diff","sum","k","len","max","apply","min","pos","abs","neg","avg","toGeoJSON","GeoJSON","feature","properties","geoPt","geometry","coordinates","features","FIVE_K","toKms","TEN_K","HALF_MARATHON","MARATHON","miles","lerpTime","prevDistance","targetDistance","overDistance","prevTime","overTime","previous","startTime","Date","map","point","elapsedDistance","previousElapsedDistance","fiveK","prevFiveK","tenK","prevTenK","halfMarathon","prevHalfMarathon","marathon","prevMarathon","fiveKs","tenKs","halfMarathons","marathons","current","units","FileDroppper","event","preventDefault","props","onFilesDrop","dataTransfer","files","className","onDrop","handleDrop","onDragOver","handleDragOver","children","React","Component","App","state","active","file","reader","FileReader","readAsText","onload","gpx","GpxParser","target","result","err","error","extra","calculator","Object","assign","setState","prefix","key","onClick","handleFileClick","header","times","s","secs","mins","hrs","toString","padStart","msToTime","renderSplitsForDistance","activeFile","handleFiles","renderFile","renderActiveFile","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fef97315.chunk.js","sourcesContent":["// Taken and adapted from 'gpxparser' package\n\n/**\n * GPX file parser\n * \n * @constructor\n */\nvar gpxParser = function () {\n    this.xmlSource = \"\";\n    this.metadata  = {};\n    this.waypoints = [];\n    this.tracks    = [];\n    this.routes    = [];\n};\n\n/**\n * Parse a gpx formatted string to a GPXParser Object\n * \n * @param {string} gpxstring - A GPX formatted String\n * \n * @return {gpxParser} A GPXParser object\n */\ngpxParser.prototype.parse = function (gpxstring) {\n    var keepThis = this;\n    var domParser = new window.DOMParser();\n    this.xmlSource = domParser.parseFromString(gpxstring, 'text/xml');\n\n    var metadata = this.xmlSource.querySelector('metadata');\n    if(metadata != null){\n        this.metadata.name  = this.getElementValue(metadata, \"name\");\n        this.metadata.desc  = this.getElementValue(metadata, \"desc\");\n        this.metadata.time  = this.getElementValue(metadata, \"time\");\n\n        let author = {};\n        let authorElem = metadata.querySelector('author');\n        if(authorElem != null){\n            author.name = this.getElementValue(authorElem, \"name\");\n            author.email  = {};\n            let emailElem = authorElem.querySelector('email');\n            if(emailElem != null){\n                author.email.id     = emailElem.getAttribute(\"id\");\n                author.email.domain = emailElem.getAttribute(\"domain\");\n            }\n\n            let link     = {};\n            let linkElem = authorElem.querySelector('link');\n            if(linkElem != null){\n                link.href = linkElem.getAttribute('href');\n                link.text = this.getElementValue(linkElem, \"text\");\n                link.type = this.getElementValue(linkElem, \"type\");\n            }\n            author.link = link;\n        }\n        this.metadata.author = author;\n\n        let link = {};\n        let linkElem = this.queryDirectSelector(metadata, 'link');\n        if(linkElem != null){\n            link.href = linkElem.getAttribute('href');\n            link.text = this.getElementValue(linkElem, \"text\");\n            link.type = this.getElementValue(linkElem, \"type\");\n            this.metadata.link = link;\n        }\n    }\n\n    var wpts = [].slice.call(this.xmlSource.querySelectorAll('wpt'));\n    for (let idx in wpts){\n        var wpt = wpts[idx];\n        let pt  = {};\n        pt.name = keepThis.getElementValue(wpt, \"name\")\n        pt.lat  = parseFloat(wpt.getAttribute(\"lat\"));\n        pt.lon  = parseFloat(wpt.getAttribute(\"lon\"));\n        pt.ele  = parseFloat(keepThis.getElementValue(wpt, \"ele\")) || null;\n        pt.cmt  = keepThis.getElementValue(wpt, \"cmt\");\n        pt.desc = keepThis.getElementValue(wpt, \"desc\");\n        keepThis.waypoints.push(pt);\n    }\n\n    var rtes = [].slice.call(this.xmlSource.querySelectorAll('rte'));\n    for (let idx in rtes){\n        var rte = rtes[idx];\n        let route = {};\n        route.name   = keepThis.getElementValue(rte, \"name\");\n        route.cmt    = keepThis.getElementValue(rte, \"cmt\");\n        route.desc   = keepThis.getElementValue(rte, \"desc\");\n        route.src    = keepThis.getElementValue(rte, \"src\");\n        route.number = keepThis.getElementValue(rte, \"number\");\n\n        let type     = keepThis.queryDirectSelector(rte, \"type\");\n        route.type   = type != null ? type.innerHTML : null;\n\n        let link     = {};\n        let linkElem = rte.querySelector('link');\n        if(linkElem != null){\n            link.href = linkElem.getAttribute('href');\n            link.text = keepThis.getElementValue(linkElem, \"text\");\n            link.type = keepThis.getElementValue(linkElem, \"type\");\n        }\n        route.link = link;\n\n        let routepoints = [];\n        var rtepts = [].slice.call(rte.querySelectorAll('rtept'));\n\n        for (let idxIn in rtepts){\n            var rtept = rtepts[idxIn];\n            let pt    = {};\n            pt.lat    = parseFloat(rtept.getAttribute(\"lat\"));\n            pt.lon    = parseFloat(rtept.getAttribute(\"lon\"));\n            pt.ele    = parseFloat(keepThis.getElementValue(rtept, \"ele\"));\n            pt.time    = parseFloat(rtept.getAttribute(\"time\"));\n            routepoints.push(pt);\n        }\n\n        route.distance = keepThis.calculDistance(routepoints);\n        route.elevation = keepThis.calcElevation(routepoints);\n        route.points = routepoints;\n        keepThis.routes.push(route);\n    }\n\n    var trks = [].slice.call(this.xmlSource.querySelectorAll('trk'));\n    for (let idx in trks){\n        var trk = trks[idx];\n        let track = {};\n\n        track.name   = keepThis.getElementValue(trk, \"name\");\n        track.cmt    = keepThis.getElementValue(trk, \"cmt\");\n        track.desc   = keepThis.getElementValue(trk, \"desc\");\n        track.src    = keepThis.getElementValue(trk, \"src\");\n        track.number = keepThis.getElementValue(trk, \"number\");\n\n        let type     = keepThis.queryDirectSelector(trk, \"type\");\n        track.type   = type != null ? type.innerHTML : null;\n\n        let link     = {};\n        let linkElem = trk.querySelector('link');\n        if(linkElem != null){\n            link.href = linkElem.getAttribute('href');\n            link.text = keepThis.getElementValue(linkElem, \"text\");\n            link.type = keepThis.getElementValue(linkElem, \"type\");\n        }\n        track.link = link;\n\n        let trackpoints = [];\n        var trkpts = [].slice.call(trk.querySelectorAll('trkpt'));\n\t    for (let idxIn in trkpts){\n            var trkpt = trkpts[idxIn];\n            let pt = {};\n            pt.lat = parseFloat(trkpt.getAttribute(\"lat\"));\n            pt.lon = parseFloat(trkpt.getAttribute(\"lon\"));\n            pt.ele = parseFloat(keepThis.getElementValue(trkpt, \"ele\")) || null;\n            pt.time = keepThis.getElementValue(trkpt, \"time\") || null;\n            trackpoints.push(pt);\n        }\n        track.distance = keepThis.calculDistance(trackpoints);\n        track.elevation = keepThis.calcElevation(trackpoints);\n        track.points = trackpoints;\n\n        keepThis.tracks.push(track);\n    }\n};\n\n/**\n * Get value from a XML DOM element\n * \n * @param  {Element} parent - Parent DOM Element\n * @param  {string} needle - Name of the searched element\n * \n * @return {} The element value\n */\ngpxParser.prototype.getElementValue = function(parent, needle){\n    let elem = parent.querySelector(needle);\n    if(elem != null){\n        return elem.innerHTML !== undefined ? elem.innerHTML : elem.childNodes[0].data;\n    }\n    return elem;\n}\n\n\n/**\n * Search the value of a direct child XML DOM element\n * \n * @param  {Element} parent - Parent DOM Element\n * @param  {string} needle - Name of the searched element\n * \n * @return {} The element value\n */\ngpxParser.prototype.queryDirectSelector = function(parent, needle) {\n\n    let elements  = parent.querySelectorAll(needle);\n    let finalElem = elements[0];\n\n    if(elements.length > 1) {\n        let directChilds = parent.childNodes;\n\n        for(var idx in directChilds) {\n            var elem = directChilds[idx];\n            if(elem.tagName === needle) {\n                finalElem = elem;\n            }\n        }\n    }\n\n    return finalElem;\n}\n\n/**\n * Calcul the Distance Object from an array of points\n * \n * @param  {} points - An array of points with lat and lon properties\n * \n * @return {DistanceObject} An object with total distance and Cumulative distances\n */\ngpxParser.prototype.calculDistance = function(points) {\n    let distance = {};\n    let totalDistance = 0;\n    let cumulDistance = [];\n    for (var i = 0; i < points.length - 1; i++) {\n        totalDistance += this.calcDistanceBetween(points[i],points[i+1]);\n        cumulDistance[i] = totalDistance;\n    }\n    cumulDistance[points.length - 1] = totalDistance;\n\n    distance.total = totalDistance;\n    distance.cumul = cumulDistance;\n\n    return distance;\n}\n/**\n * Calcul Distance between two points with lat and lon\n * \n * @param  {} wpt1 - A geographic point with lat and lon properties\n * @param  {} wpt2 - A geographic point with lat and lon properties\n * \n * @returns {float} The distance between the two points\n */\ngpxParser.prototype.calcDistanceBetween = function (wpt1, wpt2) {\n    let latlng1 = {};\n    latlng1.lat = wpt1.lat;\n    latlng1.lon = wpt1.lon;\n    let latlng2 = {};\n    latlng2.lat = wpt2.lat;\n    latlng2.lon = wpt2.lon;\n    var rad = Math.PI / 180,\n\t\t    lat1 = latlng1.lat * rad,\n\t\t    lat2 = latlng2.lat * rad,\n\t\t    sinDLat = Math.sin((latlng2.lat - latlng1.lat) * rad / 2),\n\t\t    sinDLon = Math.sin((latlng2.lon - latlng1.lon) * rad / 2),\n\t\t    a = sinDLat * sinDLat + Math.cos(lat1) * Math.cos(lat2) * sinDLon * sinDLon,\n\t\t    c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\treturn 6371000 * c;\n}\n\n/**\n * Generate Elevation Object from an array of points\n * \n * @param  {} points - An array of points with ele property\n * \n * @returns {ElevationObject} An object with negative and positive height difference and average, max and min altitude data\n */\ngpxParser.prototype.calcElevation = function (points) {\n    var dp = 0,\n        dm = 0,\n        ret = {};\n\n    for (var i = 0; i < points.length - 1; i++) {\n        var diff = parseFloat(points[i + 1].ele) - parseFloat(points[i].ele);\n\n        if (diff < 0) {\n            dm += diff;\n        } else if (diff > 0) {\n            dp += diff;\n        }\n    }\n\n    var elevation = [];\n    var sum = 0;\n\n    for (var k = 0, len = points.length; k < len; k++) {\n        var ele = parseFloat(points[k].ele);\n        elevation.push(ele);\n        sum += ele;\n    }\n\n    ret.max = Math.max.apply(null, elevation) || null;\n    ret.min = Math.min.apply(null, elevation) || null;\n    ret.pos = Math.abs(dp) || null;\n    ret.neg = Math.abs(dm) || null;\n    ret.avg = sum / elevation.length || null;\n\n    return ret;\n};\n\n/**\n * Export the GPX object to a GeoJSON formatted Object\n * \n * @returns {} a GeoJSON formatted Object\n */\ngpxParser.prototype.toGeoJSON = function () {\n    var GeoJSON = {\n        \"type\": \"FeatureCollection\",\n        \"features\": [],\n        \"properties\": {\n            \"name\": this.metadata.name,\n            \"desc\": this.metadata.desc,\n            \"time\": this.metadata.time,\n            \"author\": this.metadata.author,\n            \"link\": this.metadata.link,\n        },\n    };\n\n    for(var idx in this.tracks) {\n        let track = this.tracks[idx];\n\n        var feature = {\n            \"type\": \"Feature\",\n            \"geometry\": {\n                \"type\": \"LineString\",\n                \"coordinates\": []\n            },\n            \"properties\": {\n            }\n        };\n\n        feature.properties.name   = track.name;\n        feature.properties.cmt    = track.cmt;\n        feature.properties.desc   = track.desc;\n        feature.properties.src    = track.src;\n        feature.properties.number = track.number;\n        feature.properties.link   = track.link;\n        feature.properties.type   = track.type;\n\n        for(idx in track.points) {\n            let pt = track.points[idx];\n        \n            var geoPt = [];\n            geoPt.push(pt.lon);\n            geoPt.push(pt.lat);\n            geoPt.push(pt.ele);\n\n            feature.geometry.coordinates.push(geoPt);\n        }\n\n        GeoJSON.features.push(feature);\n    }\n\n    for(idx in this.routes) {\n        let track = this.routes[idx];\n\n        feature = {\n            \"type\": \"Feature\",\n            \"geometry\": {\n                \"type\": \"LineString\",\n                \"coordinates\": []\n            },\n            \"properties\": {\n            }\n        };\n\n        feature.properties.name   = track.name;\n        feature.properties.cmt    = track.cmt;\n        feature.properties.desc   = track.desc;\n        feature.properties.src    = track.src;\n        feature.properties.number = track.number;\n        feature.properties.link   = track.link;\n        feature.properties.type   = track.type;\n\n\n        for(idx in track.points) {\n            let pt = track.points[idx];\n        \n            geoPt = [];\n            geoPt.push(pt.lon);\n            geoPt.push(pt.lat);\n            geoPt.push(pt.ele);\n\n            feature.geometry.coordinates.push(geoPt);\n        }\n\n        GeoJSON.features.push(feature);\n    }\n\n    for(idx in this.waypoints) {\n        let pt = this.waypoints[idx];\n    \n        feature = {\n            \"type\": \"Feature\",\n            \"geometry\": {\n                \"type\": \"Point\",\n                \"coordinates\": []\n            },\n            \"properties\": {\n            }\n        };\n\n        feature.properties.name = pt.name;\n        feature.properties.cmt  = pt.cmt;\n        feature.properties.desc = pt.desc;\n\n        feature.geometry.coordinates = [pt.lon, pt.lat, pt.ele];\n\n        GeoJSON.features.push(feature);\n    }\n\n    return GeoJSON;\n}\n\nexport default gpxParser;\n","import distance from \"@turf/distance\";\nimport { point } from \"@turf/helpers\";\n\n// Pretty sure this is how Strava is calculating the distance for the \"Best\n// Efforts\" feature. This of course makes each distance a little shorter than\n// expected as 5000m is obviously not exactly 3.1 miles etc.\nconst FIVE_K        = toKms(3.1);\nconst TEN_K         = toKms(6.2);\nconst HALF_MARATHON = toKms(13.1);\nconst MARATHON      = toKms(26.2);\n\nfunction toKms (miles) {\n  return miles * 1.60934;\n}\n\nfunction fractionOver (previous, target, over) {\n  const d = over - previous;\n  const n = target - previous;\n  return n / d;\n}\n\nfunction lerpTime (prevDistance, targetDistance, overDistance, prevTime, overTime) {\n  const t = fractionOver(prevDistance, targetDistance, overDistance);\n  const diff = overTime - prevTime;\n  return prevTime + diff * t;\n}\n\nexport default function (points) {\n  const startTime = Date.parse(points[0].time);\n\n  points = points.map(({ lon, lat, ele, time }) => {\n    return {\n      point: point([lon, lat]),\n      time: Date.parse(time) - startTime,\n      elevation: ele,\n    }\n  });\n\n  let previous = points[0];\n  let elapsedDistance = 0;\n  let previousElapsedDistance = 0;\n\n  let fiveK = FIVE_K;\n  let prevFiveK = 0;\n\n  let tenK = TEN_K;\n  let prevTenK = 0;\n\n  let halfMarathon = HALF_MARATHON;\n  let prevHalfMarathon = 0;\n\n  let marathon = MARATHON;\n  let prevMarathon = 0;\n\n  const fiveKs = [];\n  const tenKs = [];\n  const halfMarathons = [];\n  const marathons = [];\n\n  for (const current of points) {\n    elapsedDistance += distance(previous.point, current.point, {\n      units: \"kilometers\",\n    });\n\n    if (elapsedDistance >= fiveK) {\n      const time = lerpTime(\n        previousElapsedDistance,\n        fiveK,\n        elapsedDistance,\n        previous.time,\n        current.time\n      );\n\n      fiveKs.push(time - prevFiveK);\n      fiveK += FIVE_K;\n      prevFiveK = time;\n    }\n\n    if (elapsedDistance >= tenK) {\n      const time = lerpTime(\n        previousElapsedDistance,\n        tenK,\n        elapsedDistance,\n        previous.time,\n        current.time\n      );\n\n      tenKs.push(time - prevTenK);\n      tenK += TEN_K;\n      prevTenK = time;\n    }\n\n    if (elapsedDistance >= halfMarathon) {\n      const time = lerpTime(\n        previousElapsedDistance,\n        halfMarathon,\n        elapsedDistance,\n        previous.time,\n        current.time\n      );\n\n      halfMarathons.push(time - prevHalfMarathon);\n      halfMarathon += HALF_MARATHON;\n      prevHalfMarathon = time;\n    }\n\n    if (elapsedDistance >= marathon) {\n      const time = lerpTime(\n        previousElapsedDistance,\n        marathon,\n        elapsedDistance,\n        previous.time,\n        current.time\n      );\n\n      marathons.push(time - prevMarathon);\n      marathon += MARATHON;\n      prevMarathon = time;\n    }\n\n    previous = current;\n    previousElapsedDistance = elapsedDistance;\n  }\n\n  return {\n    fiveKs,\n    tenKs,\n    halfMarathons,\n    marathons,\n  };\n}\n","import React from 'react';\n\nimport './FileDropper.css';\n\nexport default class FileDroppper extends React.Component {\n  handleDrop(event) {\n    event.preventDefault();\n    this.props.onFilesDrop(event.dataTransfer.files);\n  }\n\n  handleDragOver(event) {\n    event.preventDefault();\n  }\n\n  render() {\n    return (\n      <div\n        className=\"filedropper\"\n        onDrop={event => this.handleDrop(event)}\n        onDragOver={event => this.handleDragOver(event)}\n      >\n        <div className=\"filedropper__text\">\n          {this.props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport GpxParser from \"./gpx\";\nimport calculator from \"./calc\";\n\nimport \"./App.css\";\nimport FileDropper from \"./components/FileDropper.js\";\n\nfunction msToTime(s) {\n  var ms = s % 1000;\n  s = (s - ms) / 1000;\n  var secs = s % 60;\n  s = (s - secs) / 60;\n  var mins = s % 60;\n  var hrs = (s - mins) / 60;\n\n  hrs = hrs.toString().padStart(2, '0');\n  mins = mins.toString().padStart(2, '0');\n  secs = secs.toString().padStart(2, '0');\n  return hrs + ':' + mins + ':' + secs;\n}\n\nexport default class App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      active: null,\n      files: [],\n    };\n  }\n\n  handleFiles(files) {\n    const active = this.state.files.length;\n\n    for (const file of files) {\n      var reader = new FileReader();\n      reader.readAsText(file, \"utf-8\");\n      reader.onload = async (event) => {\n        const gpx = new GpxParser()\n        try {\n          gpx.parse(event.target.result);\n        } catch (err) {}\n\n        var data = {\n          name: file.name,\n          error: false,\n        }\n\n        if (gpx.tracks.length >= 1) {\n          const extra = calculator(gpx.tracks[0].points);\n          data = Object.assign({}, data, extra);\n        } else {\n          data.error = true;\n        }\n\n        this.setState(state => {\n          return Object.assign({}, state, {\n            files: [...state.files, data],\n            active: active,\n          })\n        });\n      };\n    }\n  }\n\n  handleFileClick(i) {\n    this.setState(state => {\n      return { active: i };\n    });\n  }\n\n  renderFile(data, i) {\n    const { active } = this.state;\n    const prefix = 'app__sidebar__file';\n    return (\n      <button\n        className={`${prefix} ${i === active ? prefix + '--active' : ''}`}\n        key={`${data.name}-${i}`}\n        onClick={event => this.handleFileClick(i)}\n      >\n        {data.name}\n      </button>\n    );\n  }\n\n  renderSplitsForDistance(header, times) {\n    if (times.length === 0) {\n      return;\n    }\n    return (\n      <div className=\"distance\">\n        <h3 className=\"distance__header\">{header}</h3>\n        <table className=\"distance__table\">\n          <tbody>\n            {times.map((time, i) => {\n              return (\n                <tr key={i}>\n                  <td>{i}</td>\n                  <td>{msToTime(time)}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n\n  renderActiveFile(data) {\n    const withError = () => (\n      <p className=\"file__distances\">\n        File does not contain any tracks\n      </p>\n    );\n\n    const withData = () => (\n      <div className=\"file__distances\">\n        {this.renderSplitsForDistance(\"5k\", data.fiveKs)}\n        {this.renderSplitsForDistance(\"10k\", data.tenKs)}\n        {this.renderSplitsForDistance(\"Half Marathon\", data.halfMarathons)}\n        {this.renderSplitsForDistance(\"Marathon\", data.marathons)}\n      </div>\n    );\n\n    return (\n      <div className=\"file\">\n        <h2 className=\"file__name\">{data.name}</h2>\n        {data.error === true ? withError() : withData()}\n      </div>\n    );\n  }\n\n  render() {\n    const { files, active } = this.state;\n    const activeFile = files[active];\n    return (\n      <div className=\"app\">\n        <div className=\"app__sidebar\">\n          <FileDropper onFilesDrop={files => this.handleFiles(files)}>\n            Drop GPX files here\n          </FileDropper>\n          {files.map((file, i) => this.renderFile(file, i))}\n        </div>\n        <div className=\"app__content\">\n          {activeFile ? this.renderActiveFile(activeFile) : null} \n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'normalize.css/normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}